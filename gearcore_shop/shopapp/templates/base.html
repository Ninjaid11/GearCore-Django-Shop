{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GearCore</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/static/img/favicon.ico">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="wrapper">

        <header>
            <div class="logo">
              <h1><a href="/">GearCore</a></h1>
            </div>

            <div class="center-section">

              <div class="dropdown" id="catalog-dropdown">
                  <button class="dropdown-btn">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ ‚ØÜ</button>
                  <div class="dropdown-content">
                    <div class="dropdown-item">
                      <span class="submenu-trigger">üéÆ –¢–æ–≤–∞—Ä—ã –¥–ª—è –≥–µ–π–º–µ—Ä–æ–≤ ‚Øà</span>
                      <div class="submenu">
                        {% for category in catalog_categories %}
                          <div class="submenu-column">
                            <strong class="category-title">
                              <a href="{% url 'products_by_category' category.name %}">
                                üóÇ {{ category.name }}
                              </a>
                            </strong>
                            <ul class="brand-list">
                              {% for brand in category.brands.all %}
                                <li>
                                  <a href="{% url 'product_by_brand' brand.name %}">‚Ä¢ {{ brand.name }}</a>
                                </li>
                              {% endfor %}
                            </ul>
                          </div>
                        {% endfor %}
                      </div>
                    </div>
                  </div>
              </div>

              <form action="{% url 'product_search' %}" method="get" class="search-form">
                <input name="q" type="text" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." value="{{ request.GET.q }}">
                <button type="submit" class="search-button">üîç</button>
              </form>
            </div>

            <div class="right-section">
                <a href="{% url 'cart_detail' %}" class="cart-link" title="–ö–æ—Ä–∑–∏–Ω–∞"><img src="{% static 'img/cart.png' %}" alt="–ö–æ—Ä–∑–∏–Ω–∞" class="cart-icon"></a>

                <div class="divider"></div>

                {% if user.is_authenticated %}
                <div class="account-info">
                  <img src="{% static 'img/profile.png' %}" alt="–ü—Ä–æ—Ñ–∏–ª—å" class="profile-icon">
                  <a href="/profile/" class="account-text">My Account</a>
                </div>
                {% else %}
                <div class="guest-info">
                    <a href="{% url 'account_login' %}"><img src="{% static 'img/enter.png' %}" alt="–ì–æ—Å—Ç—å" class="enter-icon"></a>
                    <a href="{% url 'account_login' %}" class="guest-text">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</a>
                </div>
                {% endif %}
            </div>

        </header>

        {% if messages %}
        <div class="message-container">
            {% for message in messages %}
                <div class="message {{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
        {% endif %}

        <main>
            {% block content %}
            {% endblock %}
        </main>

        <footer>
            <p>&copy; 2025 GearCore. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>

<script src="{% static 'js/menu.js' %}"></script>
</body>
</html>